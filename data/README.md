# üìÅ Data Directory

This folder contains raw and processed data for the churn prediction project.

## üìä Expected Data Files

### Raw Data (from Google Drive)
Download from: [Google Drive Link](https://drive.google.com/file/d/1K5W2y8C_p5S1g1qtFuBO6smNu_0z6zs/view?usp=drive_link)

1. **orders.csv**
   - Columns: `order_id`, `user_id`, `is_otd`, `order_date`, `delivery_status`
   - Description: Order transaction data with delivery information

2. **crm.csv**
   - Columns: `order_id`, `crm_delivery_request_count`, `crm_fake_delivery_request_count`, `rate_to_shop`, `rate_to_courier`
   - Description: Customer relationship management and rating data

3. **comments.csv**
   - Columns: `order_id`, `description`
   - Description: Customer comments and feedback

### Processed Data (Generated by Notebooks)

4. **user_features.csv**
   - Generated by: `notebooks/02_feature_engineering.ipynb`
   - Description: User-level aggregated features for modeling
   - Columns: ~20 engineered features + `is_churned` label

## üíæ Data Loading

### Step 1: Download Raw Data
```bash
# Manually download from Google Drive and place in this folder
# Or use gdown (if available):
pip install gdown
gdown https://drive.google.com/uc?id=1K5W2y8C_p5S1g1qtFuBO6smNu_0z6zs
```

### Step 2: Load into Database
```bash
# Using the load script
python db/load_data.py

# Or using Docker Compose
docker-compose up db
python db/load_data.py
```

### Step 3: Generate Features
```bash
# Run feature engineering notebook
jupyter notebook notebooks/02_feature_engineering.ipynb
```

## üìä Data Statistics

After loading, you should have:
- **~50,000+** orders
- **~10,000+** unique users
- **~20** engineered features per user
- **Churn rate:** ~25-35% (estimated)

## üîí Data Privacy

‚ö†Ô∏è **Important:**
- Raw data files (`*.csv`) are in `.gitignore`
- Never commit raw data to the repository
- Use environment variables for sensitive information

## üìù Data Schema

### Orders Table
```sql
CREATE TABLE orders (
    order_id VARCHAR(50) PRIMARY KEY,
    user_id VARCHAR(50) NOT NULL,
    is_otd BOOLEAN,
    order_date DATE NOT NULL,
    delivery_status VARCHAR(50)
);
```

### CRM Table
```sql
CREATE TABLE crm (
    id SERIAL PRIMARY KEY,
    order_id VARCHAR(50) NOT NULL UNIQUE,
    crm_delivery_request_count INTEGER DEFAULT 0,
    crm_fake_delivery_request_count INTEGER DEFAULT 0,
    rate_to_shop DECIMAL(3,2),
    rate_to_courier DECIMAL(3,2),
    FOREIGN KEY (order_id) REFERENCES orders(order_id)
);
```

### Comments Table
```sql
CREATE TABLE comments (
    id SERIAL PRIMARY KEY,
    order_id VARCHAR(50) NOT NULL,
    description TEXT,
    FOREIGN KEY (order_id) REFERENCES orders(order_id)
);
```

---

üìå **Note:** All data processing steps are documented in the notebooks folder.
