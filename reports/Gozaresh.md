<div dir="rtl" align="right">

# ๐ฎ ฺฏุฒุงุฑุด ูพุฑูฺู ูพุดโุจู ุฑุฒุด ูุดุชุฑ

> ุชุญูู ุฑูุชุงุฑ ูุดุชุฑุงู ู ูพุดโุจู ุงุญุชูุงู ุฑุฒุด ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุฏฺฏุฑ ูุงุดู

---

## ๐ ููุฑุณุช ูุทุงูุจ

<div dir="rtl">

1. [ุชุนุฑู ูุณุฆูู ู ูุฏู](#-ุชุนุฑู-ูุณุฆูู-ู-ูุฏู)
2. [ูุนุฑู ุฏุชุงุณุช](#-ูุนุฑู-ุฏุชุงุณุช)
3. [ุชุญูู ุงฺฉุชุดุงู ุฏุงุฏูโูุง](#-ุชุญูู-ุงฺฉุชุดุงู-ุฏุงุฏูโูุง-eda)
4. [ุชุญููโูุง ุจุฒูุณ](#-ุชุญูููุง-ุจุฒูุณ-ู-ูุงู)
5. [ุณฺฏููุชโุจูุฏ ูุดุชุฑุงู](#-ุณฺฏููุชุจูุฏ-ูุดุชุฑุงู)
6. [ุชุนุฑู Churn](#-ุชุนุฑู-churn)
7. [ูพุดโูพุฑุฏุงุฒุด ุฏุงุฏูโูุง](#-ูพุดูพุฑุฏุงุฒุด-ุฏุงุฏููุง)
8. [ูููุฏุณ ูฺฺฏโูุง](#-ูููุฏุณ-ูฺฺฏูุง)
9. [ูุฏูโุณุงุฒ](#-ูุฏูุณุงุฒ)
10. [ูุชุงุฌ ู ุงุฑุฒุงุจ](#-ูุชุงุฌ-ู-ุงุฑุฒุงุจ)
11. [ูพุดููุงุฏุงุช ุขูุฏู](#-ูพุดููุงุฏุงุช-ุขูุฏู)

</div>

---

## ๐ฏ ุชุนุฑู ูุณุฆูู ู ูุฏู

ุฏุฑ ฺฉุณุจโูฺฉุงุฑูุง Q-Commerce (ุชุฌุงุฑุช ุณุฑุน)ุ ุญูุธ ูุดุชุฑุงู ูุนู ุจู ูุฑุงุชุจ ุงุฑุฒุงูโุชุฑ ุงุฒ ุฌุฐุจ ูุดุชุฑุงู ุฌุฏุฏ ุงุณุช. ูุฏู ุงู ูพุฑูฺูุ **ูพุดโุจู ุงุญุชูุงู ุฑุฒุด ูุดุชุฑุงู** ุงุณุช ุชุง ุชู ุจุงุฒุงุฑุงุจ ุจุชูุงูุฏ ูุจู ุงุฒ ุงุฒ ุฏุณุช ุฏุงุฏู ูุดุชุฑุ ุงูุฏุงูุงุช ูพุดฺฏุฑุงูู ุงูุฌุงู ุฏูุฏ.

> โ๏ธ **ฺุงูุด ุงุตู:** ุฏุฑ E-commerce ุจุฑุฎูุงู ุณุฑูุณโูุง ุงุดุชุฑุงฺฉ (ูุซู Netflix)ุ ูฺ ุณฺฏูุงู ุตุฑุญ ุจุฑุง ูุบู ุงุดุชุฑุงฺฉ ูุฌูุฏ ูุฏุงุฑุฏ ู ุจุงุฏ Churn ุฑุง ุจู ุตูุฑุช ุถูู ุชุนุฑู ฺฉูู.

### ุงูุฏุงู ูพุฑูฺู
- ุดูุงุณุง ุงูฺฏููุง ุฑูุชุงุฑ ูุดุชุฑุงู ุฏุฑ ุขุณุชุงูู ุฑุฒุด
- ุณุงุฎุช ูุฏู ูพุดโุจู ุจุง ุชูุฑฺฉุฒ ุจุฑ **Recall ุจุงูุง**
- ุงุฑุงุฆู ุจูุดโูุง ฺฉุงุฑุจุฑุฏ ุจุฑุง ุจูุจูุฏ ุชุฌุฑุจู ูุดุชุฑ

---

## ๐ ูุนุฑู ุฏุชุงุณุช

### ุขูุงุฑ ฺฉู

<div dir="rtl">

| ูุชุฑฺฉ | ููุฏุงุฑ |
|:------:|:-----:|
| ุชุนุฏุงุฏ ุณูุงุฑุดุงุช | 2,720,059 |
| ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู | 375,998 |
| ุจุงุฒู ุฒูุงู | 180 ุฑูุฒ |
| ูุงูฺฏู ุณูุงุฑุด ุฏุฑ ุฑูุฒ | 15,111 |

</div>

ุฏุงุฏูโูุง ูุฑุจูุท ุจู **ููู ุงูู ุณุงู ฑดฐด ุดูุณ** (ุงุณููุฏ ฑดฐณ ุชุง ุดูุฑูุฑ ฑดฐด) ูุณุชูุฏ.

### ุณุงุฎุชุงุฑ ุฌุฏุงูู

<p align="center">
  <img src="er_diagram.svg" alt="ER Diagram" width="800">
</p>

**๐ฆ ุฌุฏูู Orders:**

<div dir="rtl">

| ุณุชูู | ุชูุถุญุงุช | ููุน |
|:----:|:-------:|:---:|
| order_id | ุดูุงุณู ฺฉุชุง ุณูุงุฑุด | PK |
| user_id | ุดูุงุณู ูุดุชุฑ | FK |
| order_date | ุชุงุฑุฎ ุณูุงุฑุด | datetime |
| is_otd | ุชุญูู ุจูโูููุน | 1/0/-1 |
| delivery_status | ูุถุนุช ุชุญูู | varchar |

</div>

**๐ซ ุฌุฏูู CRM:**

<div dir="rtl">

| ุณุชูู | ุชูุถุญุงุช |
|:----:|:-------:|
| rate_to_shop | ุงูุชุงุฒ ูุฑูุดฺฏุงู (1-5) |
| rate_to_courier | ุงูุชุงุฒ ูพฺฉ (1-5) |
| crm_delivery_request_count | ุชุนุฏุงุฏ ุดฺฉุงุงุช |

</div>

> โ๏ธ **ูฺฉุชู:** ุงู ุฏุชุงุณุช ูุงูุฏ ุงุทูุงุนุงุช ูุงู ุงุณุชุ ุจูุงุจุฑุงู ุงุฒ RF ุจู ุฌุง RFM ุงุณุชูุงุฏู ุดุฏ.

---

## ๐ ุชุญูู ุงฺฉุชุดุงู ุฏุงุฏูโูุง (EDA)

### ุชูุฒุน ุชุนุฏุงุฏ ุณูุงุฑุด ฺฉุงุฑุจุฑุงู

<div dir="rtl">

| ูุชุฑฺฉ | ููุฏุงุฑ |
|:-----:|:-----:|
| ฺฉโุจุงุฑ ุฎุฑุฏุงุฑุงู | 44.9% |
| ูุงูฺฏู ุณูุงุฑุด/ฺฉุงุฑุจุฑ | 7.23 |
| ูุงูู ุณูุงุฑุด/ฺฉุงุฑุจุฑ | 2 |

</div>

<p align="center">
  <img src="01_order_distribution.png" alt="Order Distribution" width="700">
</p>

> ๐จ **ุงูุชู ฺฉูุฏ:** ุชูุฑุจุงู ูู ุงุฒ ฺฉุงุฑุจุฑุงู (44.9%) ููุท ฺฉ ุจุงุฑ ุฎุฑุฏ ฺฉุฑุฏูโุงูุฏ!

### ุนููฺฉุฑุฏ ุชุญูู

<div dir="rtl">

| ูุถุนุช | ุฏุฑุตุฏ |
|:-----:|:----:|
| โ ุชุญูู ูููู | 95.5% |
| โฐ ุจูโูููุน | 74.2% |
| โ๏ธ ุจุง ุชุฃุฎุฑ | 19.7% |
| โ ูุบู ุดุฏู | 2.8% |

</div>

### ุฑููุฏ ุณูุงุฑุดุงุช ุฏุฑ ุฒูุงู

<p align="center">
  <img src="02_daily_orders_timeseries.png" alt="Daily Orders" width="700">
</p>

> โ๏ธ ุฏุฑ ุงูุงุฎุฑ ุฎุฑุฏุงุฏ ู ุงูุงู ุชุฑ 1404 ฺฉ ุงูุช ุดุฏุฏ ูุดุงูุฏู ูโุดูุฏ.

### ุชุญูู Cohort

<p align="center">
  <img src="03_cohort_heatmap.png" alt="Cohort" width="700">
</p>

---

## ๐ฐ ุชุญููโูุง ุจุฒูุณ ู ูุงู

### ูุฑุฎ ุชุจุฏู

<div dir="rtl">

| ูุชุฑฺฉ | ููุฏุงุฑ |
|:-----:|:-----:|
| ุชุจุฏู ุฎุฑุฏ ุงูู ุจู ุฏูู | 55.1% |
| ูุงูู ุฒูุงู ุชุง ุฎุฑุฏ ุฏูู | 7 ุฑูุฒ |
| ูุงูฺฏู ุฒูุงู ุชุง ุฎุฑุฏ ุฏูู | 21 ุฑูุฒ |

</div>

<p align="center">
  <img src="04_conversion_funnel.png" alt="Funnel" width="600">
</p>

### ุฑุถุงุช ูุดุชุฑ (CSAT)

<div dir="rtl">

| ูุนุงุฑ | ุงูุชุงุฒ | ูพูุดุด |
|:----:|:------:|:----:|
| โญ ูุฑูุดฺฏุงู | 4.42/5 | 41.4% |
| ๐ด ูพฺฉ | 4.68/5 | 26.3% |

</div>

**ุชุฃุซุฑ ุชุฃุฎุฑ ุจุฑ ุฑุถุงุช:**
- ุณูุงุฑุด ุจูโูููุน โ ุงูุชุงุฒ: **4.52**
- ุณูุงุฑุด ุจุง ุชุฃุฎุฑ โ ุงูุชุงุฒ: **4.26**
- ูุฑุฎ ุชฺฉุช ุจุง ุชุฃุฎุฑ: **43%** (vs 11.5%)

### CLV ุฌุงฺฏุฒู

ฺูู ุฏุชุง ูุงู ูุฏุงุฑู:

```
CLV Score = Total Orders ร (1 + log(Lifetime Days + 1))
```

<p align="center">
  <img src="05_clv_distribution.png" alt="CLV" width="700">
</p>

> โ **ุงูุชู:** 40% ูุดุชุฑุงู VIP ูุณุฆูู 88.9% ุณูุงุฑุดุงุช ูุณุชูุฏ (ูุงููู 80-20)

### ุชุญูู Survival

<p align="center">
  <img src="06_survival_curve.png" alt="Survival" width="700">
</p>

---

## ๐ฅ ุณฺฏููุชโุจูุฏ ูุดุชุฑุงู

<div dir="rtl">

| ุณฺฏููุช | ุชุนุฏุงุฏ ุณูุงุฑุด | ฺฉุงุฑุจุฑุงู | ุฏุฑุตุฏ |
|:-----:|:-----------:|:-------:|:----:|
| ๐ ฺฉโุจุงุฑ | 1 | 168,769 | 44.9% |
| ๐ฆ ุฌุฏุฏ | 2-4 | 83,619 | 22.2% |
| ๐ ููุธู | 5-10 | 55,972 | 14.9% |
| โญ ููุงุฏุงุฑ | 11-30 | 48,491 | 12.9% |
| ๐ VIP | 30+ | 19,147 | 5.1% |

</div>

<p align="center">
  <img src="07_segment_distribution.png" alt="Segments" width="700">
</p>

<p align="center">
  <img src="08_pareto_chart.png" alt="Pareto" width="700">
</p>

<p align="center">
  <img src="09_rf_by_segment.png" alt="RF" width="700">
</p>

---

## ๐ฏ ุชุนุฑู Churn

### ุฑูฺฉุฑุฏ: Threshold ูุฎุชุต ูุฑ ุณฺฏููุช

1. ูุญุงุณุจู **ูุงูฺฏู ูุงุตูู ุฎุฑุฏ** ูุฑ ฺฉุงุฑุจุฑ
2. ูุญุงุณุจู **ูุงูู** ุฏุฑ ูุฑ ุณฺฏููุช
3. Churn: ุงฺฏุฑ `Recency > 2 ร Median Interval`

<div dir="rtl">

| ุณฺฏููุช | ุขุณุชุงูู (ุฑูุฒ) | ูุฑุฎ Churn |
|:-----:|:------------:|:---------:|
| ๐ 1 ุณูุงุฑุด | 45 | 74.4% |
| ๐ฆ 2-4 | 39 | 54.4% |
| ๐ 5-10 | 35 | 31.6% |
| โญ 11-30 | 17 | 30.2% |
| ๐ 30+ | 14 | 12.5% |

</div>

<p align="center">
  <img src="10_churn_rate_trend.png" alt="Churn Trend" width="700">
</p>

---

## ๐ง ูพุดโูพุฑุฏุงุฒุด ุฏุงุฏูโูุง

### ูุฏุฑุช ููุงุฏุฑ ฺฏูุดุฏู

<div dir="rtl">

| ุณุชูู | ฺฏูุดุฏู | ุฑูุด |
|:----:|:-----:|:---:|
| rate_to_shop | 58.6% | Zero + Indicator |
| rate_to_courier | 73.7% | Zero + Indicator |
| is_otd = -1 | 6.1% | ุณู flag ุฌุฏุงฺฏุงูู |

</div>

### Rolling Window Split

> โ **ุฌููฺฏุฑ ุงุฒ Data Leakage:** Features ููุท ุงุฒ ูุจู Cutoffุ Label ุงุฒ ุจุนุฏ Cutoff

---

## โ๏ธ ูููุฏุณ ูฺฺฏโูุง

ุฏุฑ ูุฌููุน **98 ูฺฺฏ** ุฏุฑ 7 ุฏุณุชู ุณุงุฎุชู ุดุฏ:

### 1๏ธโฃ ูฺฺฏโูุง RF (9 ูฺฺฏ)

<div dir="rtl">

| ูฺฺฏ | ุชูุถุญุงุช |
|:-----:|:-------:|
| `total_orders` | ุชุนุฏุงุฏ ฺฉู ุณูุงุฑุดุงุช |
| `recency` | ุฑูุฒ ุงุฒ ุขุฎุฑู ุณูุงุฑุด |
| `tenure_days` | ุนูุฑ ูุดุชุฑ |
| `min_order_interval` | ฺฉูุชุฑู ูุงุตูู ุณูุงุฑุดุงุช |
| `max_order_interval` | ุจุดุชุฑู ูุงุตูู ุณูุงุฑุดุงุช |
| `median_order_interval` | ูุงูู ูุงุตูู |
| `cv_order_interval` | ุถุฑุจ ุชุบุฑุงุช |
| `orders_per_month` | ุณูุงุฑุด ุฏุฑ ูุงู |
| `recency_tenure_ratio` | **ูููโุชุฑู ูฺฺฏ!** |

</div>

### 2๏ธโฃ ฺฉูุช ุชุญูู (27 ูฺฺฏ)

<div dir="rtl">

| ูฺฺฏ | ุชูุถุญุงุช |
|:-----:|:-------:|
| `otd_rate` | ูุฑุฎ ุจูโูููุน |
| `late_rate` | ูุฑุฎ ุชุฃุฎุฑ |
| `otd_rate_last_3/5/10` | Rolling OTD |
| `consecutive_late_current` | ุชุฃุฎุฑ ูุชูุงู ูุนู |
| `max_consecutive_late` | ุญุฏุงฺฉุซุฑ ุชุฃุฎุฑ ูุชูุงู |
| `otd_trend` | ุฑููุฏ ุจูุจูุฏ/ุจุฏุชุฑ |
| `last_order_was_late` | ุขุฎุฑู ุณูุงุฑุด ุชุฃุฎุฑ ุฏุงุดุชุ |
| `first_order_is_otd_*` | ูุถุนุช ุณูุงุฑุด ุงูู |

</div>

### 3๏ธโฃ CRM/ูพุดุชุจุงู (13 ูฺฺฏ)

<div dir="rtl">

| ูฺฺฏ | ุชูุถุญุงุช |
|:-----:|:-------:|
| `total_crm_requests` | ฺฉู ุดฺฉุงุงุช |
| `crm_request_rate` | ูุฑุฎ ุดฺฉุงุช/ุณูุงุฑุด |
| `fake_to_real_ratio` | ูุณุจุช ูฺฉ |
| `high_crm_user` | ฺฉุงุฑุจุฑ ูพุฑุดฺฉุงุชุ |

</div>

### 4๏ธโฃ ุงูุชุงุฒุฏู (23 ูฺฺฏ)

<div dir="rtl">

| ูฺฺฏ | ุชูุถุญุงุช |
|:-----:|:-------:|
| `avg_rate_shop/courier` | ูุงูฺฏู ุงูุชุงุฒ |
| `rating_engagement` | ูุดุงุฑฺฉุช ุงูุชุงุฒุฏู |
| `has_low_*_rating` | ุงูุชุงุฒ ูพุงู ุฏุงุฏูุ |
| `shop_rating_completion` | ุฏุฑุตุฏ ุงูุชุงุฒุฏู |

</div>

### 5๏ธโฃ ฺฉุงููุช - NLP ุณุงุฏู (15 ูฺฺฏ)

<div dir="rtl">

| ูฺฺฏ | ุชูุถุญุงุช |
|:-----:|:-------:|
| `total_comments` | ุชุนุฏุงุฏ ฺฉุงููุช |
| `mentions_problem_count` | ุฐฺฉุฑ ูุดฺฉู |
| `mentions_late_count` | ุฐฺฉุฑ ุชุฃุฎุฑ |
| `is_vocal_customer` | ฺฉุงุฑุจุฑ ูพุฑุญุฑูุ |

</div>

### 6๏ธโฃ ุณูุงุฑุด ุงูู/ุขุฎุฑ (7 ูฺฺฏ)

<div dir="rtl">

| ูฺฺฏ | ุชูุถุญุงุช |
|:-----:|:-------:|
| `first_order_had_issue` | ุณูุงุฑุด ุงูู ูุดฺฉู ุฏุงุดุชุ |
| `last_order_had_issue` | ุขุฎุฑู ุณูุงุฑุด ูุดฺฉู ุฏุงุดุชุ |

</div>

### 7๏ธโฃ ุชุฑฺฉุจ (4 ูฺฺฏ)

<div dir="rtl">

| ูฺฺฏ | ุชูุถุญุงุช |
|:-----:|:-------:|
| `high_freq_low_quality` | ุณูุงุฑุด ุฒุงุฏ + OTD ูพุงู |
| `engaged_but_unhappy` | ุงูุชุงุฒุฏู ูุนุงู + ูพุงู |
| `first_bad_still_active` | ุชุฌุฑุจู ุจุฏ ุงูู + ูุนุงู |

</div>

<p align="center">
  <img src="11_feature_importance.png" alt="Importance" width="700">
</p>

---

## ๐ค ูุฏูโุณุงุฒ

### ุงุณุชุฑุงุชฺ ุฏูฺฏุงูู

- **๐ค 1 ุณูุงุฑุด:** XGBoost
- **๐ฅ 2+ ุณูุงุฑุด:** FT-Transformer

### ููุงุณู ุฑูฺฉุฑุฏูุง

<div dir="rtl">

| ุฑูฺฉุฑุฏ | Weighted Recall |
|:------:|:---------------:|
| ูุฏู ฺฉูพุงุฑฺู | 0.29 |
| Per-Segment | 0.48 |
| Clustering | 0.74 |

</div>

### ูุฒูโุฏู ุณฺฏููุชโูุง

<div dir="rtl">

| ุณฺฏููุช | ูุฒู |
|:-----:|:---:|
| 2-4 ุณูุงุฑุด | 0.5 |
| 5-10 ุณูุงุฑุด | 1.5 |
| 11-30 ุณูุงุฑุด | 3.0 |
| 30+ ุณูุงุฑุด | 5.0 |

</div>

> โ **ุจูุจูุฏ ุจุง Tuning:** 0.478 โ 0.558 (+8%)

---

## ๐ ูุชุงุฌ ู ุงุฑุฒุงุจ

### ุนููฺฉุฑุฏ ููุง

<div dir="rtl">

| ูุชุฑฺฉ | ููุฏุงุฑ |
|:-----:|:-----:|
| Overall Recall | 0.82 |
| F1 Score | 0.73 |
| Weighted Recall | 0.65 |
| ROC-AUC | 0.63 |

</div>

### ุจู ุชูฺฉฺฉ ุณฺฏููุช

<div dir="rtl">

| ุณฺฏููุช | ูุฏู | Recall |
|:-----:|:---:|:------:|
| ๐ค 1 ุณูุงุฑุด | XGBoost | 0.75 |
| ๐ฆ 2-4 | FT-Transformer | 0.99 |
| ๐ 5-10 | FT-Transformer | 0.89 |
| โญ 11-30 | FT-Transformer | 0.69 |
| ๐ 30+ | FT-Transformer | 0.52 |

</div>

<p align="center">
  <img src="12_roc_curves.png" alt="ROC" width="700">
</p>

<p align="center">
  <img src="13_confusion_matrix.png" alt="CM" width="600">
</p>

<p align="center">
  <img src="14_shap_summary.png" alt="SHAP" width="700">
</p>

> ๐ก **ูููโุชุฑู ูฺฺฏ:** `recency_tenure_ratio`

<p align="center">
  <img src="15_model_comparison.png" alt="Comparison" width="700">
</p>

---

## ๐ฎ ูพุดููุงุฏุงุช ุขูุฏู

1. **Rolling Behavior:** ุงูฺฏู ฺฉ ูุงู ุงุฎุฑ > 6 ูุงู ฺฏุฐุดุชู
2. **Personalized Threshold:** ุจุฑุง VIP ุงุฒ ูุงูู ุฎูุฏ ฺฉุงุฑุจุฑ
3. **Time-Aware Features:** ูุฒูโุฏู ุจู ุฑูุชุงุฑูุง ุงุฎุฑ
4. **ุนูุช ุนุฏู ุฎุฑุฏ ุฏูู:** ฺุฑุง 45% ููุท ฺฉโุจุงุฑุ
5. **ุฏุงุฏู ูุงู:** ุชุจุฏู RF ุจู RFM
6. **A/B Testing:** ุงุฑุฒุงุจ intervention

### ูฺฉุงุช ฺฉูุฏ

- ุณฺฏููุชโุจูุฏ ูุจู ุงุฒ ูุฏูโุณุงุฒุ ุฏูุช ุฑุง ุงูุฒุงุด ูโุฏูุฏ
- ุชุนุฑู Churn ุจุงุฏ ูุฎุชุต ูุฑ ุณฺฏููุช ุจุงุดุฏ
- ุชุฌุฑุจู ุงููู ุณูุงุฑุด ุชุฃุซุฑ ุฒุงุฏ ุฏุงุฑุฏ

---

<div align="center">
  
๐ ูพุฑูฺู ูพุดโุจู ุฑุฒุด ูุดุชุฑ

[GitHub Repository](https://github.com/peyman886/digikala-customer-churn-prediction)

</div>

</div>
